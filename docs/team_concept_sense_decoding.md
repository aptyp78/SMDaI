# Концепция команды ИИ‑исполнителей для технологии раскодирования смысла

**Версия:** 1.0  
**Автор модели:** инициатор проекта (единственный человек в контуре)  
**Назначение документа:** зафиксировать цели, принципы, роли, процессы, артефакты и метрики команды ИИ‑исполнителей, работающей без человеческих участников (кроме автора‑архитектора), для реализации технологии раскодирования смысла.

---

## 1. Резюме
Проект строится вокруг мультиагентной команды ИИ‑исполнителей, которые извлекают, формализуют и верифицируют **смысловые единицы** из корпуса источников и материализуют их в **графе смыслов**. Команда автономна по операции (ingest → анализ → гипотезы → граф → ответы → оценка), управляется через единую оркестрацию, а результат измерим метриками качества и воспроизводимости. Человек‑архитектор формулирует цели, утверждает критерии качества и принимает финальные решения.

---

## 2. Контекст и целевая картина
- **Базовый ресурс:** отсутствие людей в проекте, кроме архитектора.  
- **Цель технологии:** декодирование смыслов из текстов/мультимодальных материалов и представление их в машиночитаемой форме с проверяемыми ссылками на источники.  
- **Ключевой артефакт:** ориентированный, взвешенный **граф смыслов** (концепты, фреймы, отношения), на основе которого работают диалог/QA и аналитика.  
- **Принцип единого источника истины:** граф и его первичные «доказательства» (фрагменты корпуса) — база для всех выводов.

---

## 3. Принципы проекта
1. **Проверяемость:** каждая смысловая связь опирается на цитируемые фрагменты источников.  
2. **Прослеживаемость (provenance):** полная трассировка «модель → версия → параметризация → артефакт».  
3. **Самокритика по умолчанию:** пары «генератор ↔ ревизор» и контрпроверки снижает искажения.  
4. **Модульность:** роли — независимые сервисы с явными контрактами ввода/вывода.  
5. **Воспроизводимость:** фиксированные пайплайны, зафиксированные семена/версии, контрольные датасеты.  
6. **Минимум предположений:** гипотезы отличаются от фактов; уровень уверенности — обязательное поле.  
7. **Этика и права:** уважение лицензий источников, защита приватности, запрет токсичных выводов.

---

## 4. Архитектура команды (обзор)
```
[Цели архитектора]
        │
        ▼
[Оркестратор задач]───traces──▶[Репозиторий артефактов]
        │                                   │
        ├─▶[Куратор корпуса]──▶[Нормализованный корпус+метаданные]
        │                                   │
        ├─▶[Лингвистический аналитик]──▶[Лингв. разметка]
        │                                   │
        ├─▶[Семантический эмбеддер]──▶[Векторные представления]
        │                                   │
        ├─▶[Охотник за имплицитным]──▶[Гипотезы/фреймы]
        │                                   │
        ├─▶[Гипертекст-мэппер]───────▶[Междокументные связи]
        │                                   │
        ├─▶[Смысловой картограф]────▶[Граф смыслов (DB)]
        │                                   │
        ├─▶[Агент-методолог]───────▶[Ответы/планы/идеи]
        │                                   │
        └─▶[Оценщик качества]──────▶[Метрики/отчёты/регрессы]
                                            │
                                          [Визуализатор]
```

---

## 5. Роли ИИ‑исполнителей
Ниже — назначение, ключевые функции, входы/выходы и KPI для каждого сервиса.

### 5.1 Оркестратор задач
- **Назначение:** декомпозиция целей, запуск/мониторинг пайплайнов, управление зависимостями, ведение бэклога и трассировки.
- **Входы:** цели/OKR, приоритеты, расписание регресс‑прогонов.
- **Выходы:** журналы запусков, DAG пайплайнов, отчёты о прогрессе, артефакты версии.
- **KPI:** доля успешных прогонов, среднее время до результата (lead time), полнота трассировки.

### 5.2 Куратор корпуса (ETL+метаданные)
- **Назначение:** сбор, очистка, нормализация, дедупликация и версионирование источников.
- **Входы:** сырой контент (тексты/транскрипты/таблицы), политики лицензирования.
- **Выходы:** нормализованный корпус, метаданные (время, жанр, адресат), снапшоты.
- **KPI:** полнота покрытия, доля валидных документов, качество метаданных.

### 5.3 Лингвистический аналитик
- **Назначение:** токенизация, морфология, синтаксис, термины и именованные сущности; глоссы/пресуппозиции как кандидаты смыслов.
- **Входы:** нормализованный корпус.
- **Выходы:** лингв. разметка, терминологический словарь, кандидаты смыслов.
- **KPI:** точность/полнота NER/терминов, согласованность разметки.

### 5.4 Семантический эмбеддер
- **Назначение:** векторные представления, семантический поиск, кластеризация тем/фреймов.
- **Входы:** корпус и лингв. разметка.
- **Выходы:** эмбеддинги, индексы (ANN), тематические кластеры.
- **KPI:** качество извлечения близких фрагментов (nDCG/MRR), устойчивость на регресс‑сету.

### 5.5 Охотник за имплицитным
- **Назначение:** поиск скрытых связей: пресуппозиции, фреймы, причинность, аллюзии; формирование гипотез с привязкой к доказательствам.
- **Входы:** корпус, эмбеддинги, лингв. разметка.
- **Выходы:** гипотезы смыслов с цитатами‑доказательствами и уровнем уверенности.
- **KPI:** подтверждаемость гипотез (доля принятия после валидации), точность причинных цепочек.

### 5.6 Гипертекст‑мэппер
- **Назначение:** междокументные отсылки, цитаты, адресность, метатекстовые отношения.
- **Входы:** корпус и ссылки/цитаты.
- **Выходы:** сеть межтекстовых связей.
- **KPI:** полнота и точность ссылочных соответствий.

### 5.7 Смысловой картограф (Graph Builder)
- **Назначение:** материализация графа смыслов в БД графов (узлы/рёбра/веса/доказательства/версии).
- **Входы:** гипотезы, кластеры, межтекстовые связи.
- **Выходы:** консистентный граф смыслов с атрибутами и индексами.
- **KPI:** качество топологии (связность, диаметр), доля рёбер с доказательствами, стабильность весов.

### 5.8 Агент‑методолог (диалог/QA/гипотезы)
- **Назначение:** ответы на вопросы поверх графа/корпуса, генерация планов исследований, предложений по расширению графа.
- **Входы:** запросы, граф, корпус.
- **Выходы:** ответы с цитатами, новые гипотезы/планы.
- **KPI:** точность ответов (по эталонам), калибровка уверенности (Brier score), полезность планов.

### 5.9 Оценщик качества (Skeptic)
- **Назначение:** контрпроверки, эталонные наборы, метрики (точность/полнота/калибровка), «красная команда».
- **Входы:** граф, ответы, корпус, журналы.
- **Выходы:** отчёты, регресс‑сигналы, рекомендации на откат/пересборку.
- **KPI:** покрытие тестов, частота обнаруженных регрессий, время до обнаружения.

### 5.10 Визуализатор
- **Назначение:** интерактивные карты графа, панели поиска и отчёты.
- **Входы:** граф, метрики, ответы.
- **Выходы:** дашборды, экспорт (PDF/HTML/PNG), артефакты презентаций.
- **KPI:** время до понимания (UX‑замер), читаемость больших подграфов.

---

## 6. «Контракт смысла» (модель данных)
Минимальная запись смысловой единицы:
```json
{
  "id": "sense:UUID",
  "labels": ["концепт", "фрейм", "связь"],
  "definition": "краткая формулировка автора/источника",
  "evidence": [
    {"doc_id": "string", "span": [start, end], "quote": "строка"},
    {"doc_id": "string", "span": [start, end]}
  ],
  "relations": [
    {"type": "implication|causal|definition|analogy|contrast", "to": "sense:UUID", "weight": 0.0}
  ],
  "context": {"time": "ISO8601", "genre": "string", "addressee": "string", "locale": "ru-RU"},
  "confidence": 0.0,
  "provenance": {"pipeline": "string", "model": "name@version", "timestamp": "ISO8601"}
}
```
**Требования:**  
- Каждый `relation.weight` калибруется и хранит метод оценки.  
- Любая гипотеза помечается `confidence` и может быть понижена/удалена по сигналу Оценщика.  
- Все поля **версионны** и трассируются до шага пайплайна.

---

## 7. Сквозной процесс (pipeline)
1. **Постановка цели** → Оркестратор превращает цель в DAG (этапы, артефакты, критерии выхода).  
2. **Подготовка корпуса** → Куратор собирает/нормализует/версионирует.  
3. **Лингвистический анализ** → единая разметка и терминология.  
4. **Семантика** → эмбеддинги, кластеры, контекстные поиски.  
5. **Имплицитное** → генерация и ранжирование гипотез с опорой на цитаты.  
6. **Гипертекст** → склейка междокументных нитей.  
7. **Граф** → запись узлов/рёбер/весов, индексация, консистентность.  
8. **Диалог/QA** → ответы, планы расширения, «вопросы к тексту».  
9. **Оценка** → метрики, регресс‑тесты, калибровка уверенности, отчёты.  

Ошибки фиксируются на уровне артефактов; любой шаг должен быть **повторяемым** и **идемпотентным**.

---

## 8. MVP и этапность
- **Этап 0 (1–2 недели):** Оркестратор, Куратор корпуса, базовый Граф, Скептик; минимальный корпус; первичная визуализация.  
- **Этап 1 (2–4 недели):** Лингвистический аналитик, Эмбеддер; простые QA‑ответы поверх графа.  
- **Этап 2 (4–6 недель):** Охотник за имплицитным, Гипертекст‑мэппер; усиление QA и качества графа.  

**Результат MVP:** первый глоссарий, связная подграф‑область, ответы с цитатами, отчёт метрик и регресс‑пакет.

---

## 9. Метрики качества
- **Извлечение понятий:** precision/recall/F1 по эталонам.  
- **Имплицитные связи:** доля подтверждённых гипотез, точность причинности.  
- **Граф:** плотность, связность, стабильноcть весов при пересборке.  
- **Ответы QA:** точность, обоснованность (evidence‑attribution), калибровка (Brier).  
- **Эксплуатационные:** время пайплайна, стоимость на документ, регресс‑алерты.  

---

## 10. Технический стек (референс)
- **Хранилища:** объектное (S3/MinIO) для корпуса; Postgres для метаданных; графовая БД (Neo4j/ArangoDB); векторный индекс (FAISS/Weaviate).  
- **Пайплайны:** Airflow/Prefect или аналог с явными DAG; трейсинг (OpenTelemetry).  
- **Сервисы:** Python (FastAPI, Pydantic); контейнеризация; очереди событий.  
- **Разметка/МЛ:** токенизация/морфология (ru‑стек), модели эмбеддингов/LLM (с версионированием).  
- **Визуализация:** D3/Cytoscape, ноутбуки для отчётов.  

*Примечание:* конкретные продукты выбираются по ограничениям лицензий, стоимости и совместимости.

---

## 11. Риски и меры
- **Галлюцинации/смещения** → жёсткое требование evidence, «генератор ↔ ревизор», калибровка.  
- **Дрейф данных/моделей** → регресс‑наборы и алерты; версии корпуса.  
- **Лицензии/этика** → фильтры источников, хранение только допустимого.  
- **Стоимость/латентность** → профилирование узких мест, стратегии кэширования и инкрементальности.

---

## 12. Интерфейсы (Sense API, черновик)
- `POST /sense` — создать/обновить смысловую единицу.  
- `GET /sense/{id}` — получить узел с evidence и связями.  
- `POST /subgraph/query` — выборка подграфа по критериям (маска отношений, глубина).  
- `POST /qa` — ответ поверх графа с цитатами и оценкой уверенности.  
- `GET /metrics` — метрики, версии, регресс‑сводка.

---

## 13. Управление и роли архитектора
- Определяет цели/метрики/стандарты качества.  
- Утверждает переходы этапов и исключения.  
- Запускает аудит следов (provenance) и подписывает релизы графа.

---

## 14. Глоссарий
- **Смысловая единица:** атомарная запись знания с определением, контекстом и доказательствами.  
- **Граф смыслов:** взвешенный ориентированный граф концептов и отношений.  
- **Evidence:** цитируемый фрагмент(ы) источника, подтверждающий(ие) связь или определение.  
- **Калибровка:** соотнесение вероятностных оценок с фактическими исходами.

---

*Этот документ описывает концепт команды ИИ‑исполнителей и может служить техническим приложением к базовому подходу к разработке технологии раскодирования смысла.*
